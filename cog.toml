# stable
tag_prefix = "v"
ignore_merge_commits = true
branch_whitelist = [ "main", "beta" ]

# Optional: Update version strings in files before committing
# pre_bump_hooks = [ "sed -i 's/version = \".*\"/version = \"{{version}}\"/' Cargo.toml" ]

post_bump_hooks = [
    """
    VER={{version_tag}} PRE=$VER- PRE=${PRE#*-}
    BRANCH=`git branch --show-current`
    git push
    git push origin $VER
    gh release create $VER${PRE:+ -p} --notes "$(cog changelog --at $VER)"
    [ "$BRANCH" != "main" ] || git push -f origin HEAD:refs/tags/${VER%%.*}
    """
]

[changelog]
path = "CHANGELOG.md"
template = "remote"
remote = "github.com"
owner = "netimg"
repository = "test2"

[commit_types]
chore = { omit_from_changelog = true }
